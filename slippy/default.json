{
  "version": "1.0",
  "name": "mycarrier-ci-pipeline",
  "description": "MyCarrier CI/CD pipeline configuration for routing slip orchestration",
  "steps": [
    {
      "name": "builds",
      "description": "All component container builds finished successfully",
      "prerequisites": [],
      "aggregates": "build"
    },
    {
      "name": "unit_tests",
      "description": "All component unit tests finished successfully",
      "prerequisites": []
    },
    {
      "name": "secret_scan",
      "description": "Security secret scanning finished - checks for leaked credentials",
      "prerequisites": []
    },
    {
      "name": "package_artifact",
      "description": "Published internal nuget/npm packages",
      "prerequisites": []
    },
    {
      "name": "dev_deploy",
      "description": "Deployment to development/feature environment",
      "prerequisites": ["builds", "unit_tests", "secret_scan"]
    },
    {
      "name": "dev_tests",
      "description": "Integration and smoke tests in development environment",
      "prerequisites": ["dev_deploy"]
    },
    {
      "name": "preprod_deploy",
      "description": "Deployment to pre-production environment",
      "prerequisites": ["builds", "unit_tests", "secret_scan"]
    },
    {
      "name": "preprod_tests",
      "description": "Integration and smoke tests in pre-production environment",
      "prerequisites": ["preprod_deploy"]
    },
    {
      "name": "prod_gate",
      "description": "Checks that the code is ready to be promoted to production",
      "is_gate": true,
      "prerequisites": ["preprod_deploy", "preprod_tests"]
    },
    {
      "name": "prod_release_created",
      "description": "GitHub release created for production deployment",
      "prerequisites": ["prod_gate"]
    },
    {
      "name": "prod_deploy",
      "description": "Deployment to production environment",
      "prerequisites": ["prod_gate", "prod_release_created"]
    },
    {
      "name": "prod_tests",
      "description": "Smoke tests in production environment",
      "prerequisites": ["prod_gate", "prod_deploy"]
    }
  ]
}
